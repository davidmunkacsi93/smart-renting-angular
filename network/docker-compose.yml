version: "3"
services:
  eth-bootnode:
    hostname: eth-bootnode
    environment:
      - nodekeyhex=cd9ac2d41a1ca0c282919c76d4388a5f413645e70f73d27960c310e3672c3c0f
      #enodeId:29ad21e141bc71addf0aea44773b1ab26e8c5178dc6668e54dd99544e9cd92e31db07ef133d486de77d89dab9a952ba8d8bb35f20b250aad82b830ae9a6b32b0
    build:
      context: ./bootnode
    ports:
      - 30301:30301/udp
    networks:
      chainnet:
        ipv4_address: 192.168.0.12

  eth-dev-node:
    hostname: eth-dev-node
    depends_on:
      - eth-bootnode
    environment:
      - address=0xf626abdeaea1b0b64b79a428546cd26e246bad39 
      - bootnodeId=29ad21e141bc71addf0aea44773b1ab26e8c5178dc6668e54dd99544e9cd92e31db07ef133d486de77d89dab9a952ba8d8bb35f20b250aad82b830ae9a6b32b0
      - bootnodeIp=192.168.0.12
    build:
      context: ./node
      args:
        privatekey: 576E5A7234753778214125442A472D4B6150645367566B58703273357638792F
        password: password
    container_name: eth-dev-node
    ports:
      - 8545:8545
    healthcheck:
      test: wget http://localhost:8545
      interval: 2s
      timeout: 5s
      retries: 30
    volumes:
    - eth-data-1:/root/.ethash
    networks:
      chainnet:
        ipv4_address: 192.168.0.13

networks:
  chainnet:
    driver: bridge
    ipam:
      config:
      - subnet: 192.168.0.0/24

volumes:
  eth-data-1: